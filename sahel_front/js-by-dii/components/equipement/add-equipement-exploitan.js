import { AddFormHtml, AddFormSelectHtml } from "../../configs/html-element.js";
import { Post } from "../../configs/requette.js";
import BaseTemplate from "../base-template/template.js";
import Navbar from "../navbar.js";
import Aside from "../aside-nav.js";
import GestionErr from "../../configs/gestion-err.js";

export default class AddEquipementExploitant extends HTMLElement {

    constructor() { super() }

    static _create = () => {

        const tabs = [
            { titre: 'Matricule Exploitan' },
            { titre: 'Date Acquisition', type: 'date' },
            { titre: 'Prix Achat', type: 'number' },
            { titre: 'Valeur Estimative', type: 'number' },
            { titre: 'Nombre Equipement' , type :'number' },
        ]

        return AddFormSelectHtml('equipement', ' Liste Equipement ', tabs, this.addEquipementExploitant);

    }

    static addEquipementExploitant = e => {
        e.preventDefault();

        const body = {
            equipementId: e.target.getElementsByTagName('select')[0].value,
            matricule: e.target.getElementsByTagName('input')[0].value,
            date_acquisisation: e.target.getElementsByTagName('input')[1].value,
            prix_achat: e.target.getElementsByTagName('input')[2].value,
            valeur_estimative: e.target.getElementsByTagName('input')[3].value,
            nbre_equipement: e.target.getElementsByTagName('input')[4].value
        }

        Post('equipement/add-equipement-exploitant', body).then((result) => {
            if (result.statusCode === 200) {
                GestionErr.affiche_err(e.target , result.message , 'success')
            } else {
                GestionErr.affiche_err(e.target , 'Erreur ' , 'danger')
            }
        }).catch((err) => {
            console.log(err);

        });

    }


};
